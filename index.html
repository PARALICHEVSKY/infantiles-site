<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–°–û–°–ê–õ? ‚Äî –ú–∏–Ω–∏-–∏–≥—Ä–∞</title>
  <style>
    :root{
      --bg1:#0f1020; --bg2:#1f1147; --bg3:#2b1163; --text:#e5e7eb;
    }
    *{box-sizing:border-box;}
    html,body{height:100%; margin:0; overflow:hidden;}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background:linear-gradient(135deg,var(--bg1),var(--bg2) 45%,var(--bg3));
      display:flex;align-items:center;justify-content:center;
    }
    .card{
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(8px);
      border-radius: 24px;
      padding: 24px;
      width:min(800px,95vw);
      text-align:center;
      position:relative;
      overflow:hidden;
      z-index:5;
    }
    h1{
      margin:0 0 .5em; font-size: clamp(42px, 8vw, 84px);
      background: linear-gradient(90deg,#fff,#a5f3fc,#c7d2fe);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      position:relative;
      animation: floatText 10s infinite linear;
    }
    @keyframes floatText {
      0%{transform:translateX(0) translateY(0) rotate(0deg);}
      25%{transform:translateX(20px) translateY(-20px) rotate(5deg);}
      50%{transform:translateX(-20px) translateY(20px) rotate(-5deg);}
      75%{transform:translateX(15px) translateY(10px) rotate(8deg);}
      100%{transform:translateX(0) translateY(0) rotate(0deg);}
    }
    .actions{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;}
    .btn{
      background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.25);
      color:var(--text);padding:14px 22px;font-size:18px;border-radius:999px;
      cursor:pointer;transition:.2s;user-select:none;
    }
    .btn:hover{transform:scale(1.1);} 
    .btn:active{transform:scale(.95);}
    .btn.yes{background:rgba(16,185,129,.2);border-color:rgba(16,185,129,.6);} 
    .btn.no{background:rgba(239,68,68,.2);border-color:rgba(239,68,68,.6);}
    .btn.retry{display:none;background:rgba(139,92,246,.2);border-color:rgba(139,92,246,.6);}
    .scoreboard{margin-top:1em;font-size:1.1rem;}
    canvas#fx{position:fixed;inset:0;pointer-events:none;z-index:1;}
  </style>
</head>
<body>
  <canvas id="fx"></canvas>
  <main class="card">
    <h1 id="title">–°–û–°–ê–õ?</h1>
    <p id="subtitle">–ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å ¬´–ù–µ—Ç¬ª –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–π—Å—è —á–µ—Å—Ç–Ω–æ üòè</p>
    <div class="actions">
      <button class="btn yes" id="yes">–î–∞</button>
      <button class="btn no" id="no">–ù–µ—Ç</button>
      <button class="btn retry" id="retry">–ï—â—ë —Ä–∞–∑</button>
    </div>
    <div class="scoreboard">–û—á–∫–∏: <span id="score">0</span> | –†–µ–∫–æ—Ä–¥: <span id="highscore">0</span></div>
  </main>

  <audio id="yay" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="nope" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>

  <script>
    const title=document.getElementById('title');
    const subtitle=document.getElementById('subtitle');
    const yesBtn=document.getElementById('yes');
    const noBtn=document.getElementById('no');
    const retryBtn=document.getElementById('retry');
    const scoreEl=document.getElementById('score');
    const highscoreEl=document.getElementById('highscore');
    const yay=document.getElementById('yay');
    const nope=document.getElementById('nope');

    let score=0,highscore=localStorage.getItem('highscoreSOSAL')||0;
    highscoreEl.textContent=highscore;

    const cv=document.getElementById('fx');
    const ctx=cv.getContext('2d');
    let confetti=[],running=false;
    function resize(){cv.width=innerWidth;cv.height=innerHeight;}resize();window.addEventListener('resize',resize);

    function burst(x,y){
      for(let i=0;i<100;i++){
        confetti.push({x,y,vx:(Math.random()*2-1)*6,vy:(Math.random()*2-1)*6-4,g:0.18+Math.random()*0.12,s:3+Math.random()*3,r:Math.random()*Math.PI,vr:(Math.random()*2-1)*0.2,life:80+Math.random()*40});
      }
      if(!running){running=true;loop();}
    }
    function loop(){
      ctx.clearRect(0,0,cv.width,cv.height);
      confetti=confetti.filter(p=>p.life>0);
      for(const p of confetti){
        p.vy+=p.g;p.x+=p.vx;p.y+=p.vy;p.r+=p.vr;p.life--;
        ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.r);
        ctx.fillStyle=`hsl(${(p.x+p.y)%360},90%,60%)`;
        ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s);
        ctx.restore();
      }
      if(confetti.length)requestAnimationFrame(loop);else running=false;
    }

    function updateScore(points){
      score+=points;scoreEl.textContent=score;
      if(score>highscore){highscore=score;localStorage.setItem('highscoreSOSAL',highscore);highscoreEl.textContent=highscore;}
    }

    function flee(){
      updateScore(1);
      const wrap=document.querySelector('.card');
      const rect=wrap.getBoundingClientRect();
      const b=noBtn.getBoundingClientRect();
      let x=Math.random()*(rect.width-b.width-24)+12;
      let y=Math.random()*(rect.height-b.height-24)+12;
      noBtn.style.position='absolute';
      noBtn.style.left=x+'px';noBtn.style.top=y+'px';
      nope.currentTime=0;nope.play();

      // —Ä–∞–Ω–¥–æ–º–Ω—ã–µ –ø—Ä–∏–∫–æ–ª—ã
      if(Math.random()<0.2){noBtn.textContent='–î–∞ üòà';noBtn.onclick=()=>yesBtn.click();}
      else{noBtn.textContent='–ù–µ—Ç';noBtn.onclick=null;}
      if(Math.random()<0.1){subtitle.textContent='üò≥ –û–≥–æ, –∫–Ω–æ–ø–∫–∞ —É—Å–∫–æ–ª—å–∑–Ω—É–ª–∞!';}
    }

    yesBtn.addEventListener('click',e=>{
      title.textContent='–£–í–ê–ñ–ê–Æ üëç';
      subtitle.textContent='–ß–µ—Å—Ç–Ω–æ—Å—Ç—å ‚Äî —Å–∏–ª–∞. –ö–æ–Ω—Ñ–µ—Ç—Ç–∏!';
      retryBtn.style.display='inline-block';
      burst(e.clientX,e.clientY);
      yay.currentTime=0;yay.play();
      updateScore(10);
    });

    noBtn.addEventListener('pointerenter',flee);
    noBtn.addEventListener('pointermove',flee);

    retryBtn.addEventListener('click',()=>{
      score=0;scoreEl.textContent=0;
      title.textContent='–°–û–°–ê–õ?';subtitle.textContent='–ü–æ–ø—Ä–æ–±—É–π –Ω–∞–∂–∞—Ç—å ¬´–ù–µ—Ç¬ª –∏–ª–∏ –ø—Ä–∏–∑–Ω–∞–π—Å—è —á–µ—Å—Ç–Ω–æ üòè';
      retryBtn.style.display='none';
      noBtn.style.position='relative';noBtn.style.left='auto';noBtn.style.top='auto';
      noBtn.textContent='–ù–µ—Ç';noBtn.onclick=null;
    });

    // –ß–∏—Ç-–∫–æ–¥: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA
    let seq=[];const cheat=['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
    window.addEventListener('keydown',e=>{
      seq.push(e.key);if(seq.length>cheat.length)seq.shift();
      if(JSON.stringify(seq).toLowerCase()===JSON.stringify(cheat)){
        subtitle.textContent='–ß–∏—Ç-—Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! üî•';
        yesBtn.textContent='–ú–ï–ì–ê –î–ê';noBtn.style.display='none';
        burst(innerWidth/2,innerHeight/2);
      }
    });
  </script>
</body>
</html>
