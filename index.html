<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–°–û–°–ê–õ?</title>
  <meta name="description" content="–ú–µ–º-—Å—Ç—Ä–∞–Ω–∏—á–∫–∞: –°–û–°–ê–õ? –î–∞ / –ù–µ—Ç" />
  <style>
    :root{
      --bg1:#0f1020; --bg2:#1f1147; --bg3:#2b1163; --accent:#8b5cf6; --accent2:#22d3ee; --ok:#10b981; --bad:#ef4444; --text:#e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background: radial-gradient(60% 80% at 70% 20%, rgba(34,211,238,.15), transparent 60%),
                  radial-gradient(60% 80% at 30% 80%, rgba(139,92,246,.15), transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2) 45%,var(--bg3));
      display:grid; place-items:center;
      overflow:hidden;
    }
    .card{
      background: rgba(255,255,255,0.06);
      border:1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(8px);
      border-radius: 24px;
      padding: clamp(18px, 3.5vw, 36px);
      width:min(720px, 94vw);
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      text-align:center;
      position:relative;
      overflow:hidden;
      animation: fadeIn 1s ease both;
    }
    @keyframes fadeIn {
      from { opacity:0; transform: scale(.9) translateY(20px); }
      to   { opacity:1; transform: scale(1) translateY(0); }
    }
    h1{
      margin:0 0 .25em; font-size: clamp(42px, 8vw, 84px); line-height:1; letter-spacing:.04em;
      background: linear-gradient(90deg, #fff, #c7d2fe, #a5f3fc);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 2px 0 rgba(0,0,0,.15);
      animation: pulse 2.5s infinite;
    }
    @keyframes pulse {
      0%,100% { filter: drop-shadow(0 0 6px rgba(255,255,255,.2)); }
      50%     { filter: drop-shadow(0 0 14px rgba(255,255,255,.45)); }
    }
    .subtitle{opacity:.8; margin-bottom:1.25em; transition:.3s ease;}

    .actions{display:flex; gap:16px; justify-content:center; flex-wrap:wrap; position:relative}
    .btn{
      --bg:rgba(255,255,255,.08); --bd:rgba(255,255,255,.25); --glow:rgba(139,92,246,.35);
      appearance:none; border:1px solid var(--bd); background:var(--bg); color:var(--text);
      padding: 14px 22px; font-size: clamp(16px, 2.5vw, 20px); border-radius: 999px; cursor:pointer;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,.25), 0 0 0 0 var(--glow);
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px) scale(1.05); box-shadow: 0 10px 24px rgba(0,0,0,.3), 0 0 0 6px var(--glow); }
    .btn:active{ transform: translateY(1px) scale(.96); }

    .btn.yes{ --bg: rgba(16,185,129,.15); --bd: rgba(16,185,129,.5); --glow: rgba(16,185,129,.25); }
    .btn.no{  --bg: rgba(239,68,68,.12); --bd: rgba(239,68,68,.45); --glow: rgba(239,68,68,.2); position:relative; }
    .btn.retry{ display:none; --bg: rgba(139,92,246,.16); --bd: rgba(139,92,246,.5); --glow: rgba(139,92,246,.25); }

    .hint{ margin-top:1rem; font-size: .95rem; opacity:.7; }

    .tag{ position:absolute; top:12px; right:12px; font-size:12px; letter-spacing:.08em; text-transform:uppercase;
      background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2); padding:.35em .6em; border-radius:8px; }

    canvas#fx{ position:fixed; inset:0; pointer-events:none; }
    .counter{ margin-top:1em; font-size:1.1rem; opacity:.85; }
    .easteregg{ display:none; margin-top:1em; font-size:1rem; color:#fcd34d; }
  </style>
</head>
<body>
  <canvas id="fx"></canvas>

  <main class="card" role="main" aria-live="polite">
    <div class="tag">üî• –º–µ–º üî•</div>
    <div class="card-inner">
      <h1 id="title">–°–û–°–ê–õ?</h1>
      <p class="subtitle" id="subtitle">–û—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ. –ú—ã –Ω–∏–∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ–º ü§´</p>

      <div class="actions">
        <button class="btn yes" id="yes">–î–∞</button>
        <button class="btn no" id="no">–ù–µ—Ç</button>
        <button class="btn retry" id="retry">–ï—â—ë —Ä–∞–∑</button>
      </div>

      <p class="hint">–ö–ª–∏–∫–Ω–∏ ¬´–ù–µ—Ç¬ª –µ—Å–ª–∏ —Å–º–æ–∂–µ—à—å üòè</p>
      <p class="counter">–ü—Ä–æ–º–∞—Ö–æ–≤: <span id="missCount">0</span></p>
      <p class="easteregg" id="egg">üê± –ü–∞—Å—Ö–∞–ª–∫–∞: –¢—ã —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞–ª—Å—è!</p>
    </div>
  </main>

  <audio id="yay" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="nope" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>

  <script>
    const title = document.getElementById('title');
    const subtitle = document.getElementById('subtitle');
    const yesBtn = document.getElementById('yes');
    const noBtn = document.getElementById('no');
    const retryBtn = document.getElementById('retry');
    const missCountEl = document.getElementById('missCount');
    const egg = document.getElementById('egg');
    const yay = document.getElementById('yay');
    const nope = document.getElementById('nope');

    let misses = 0;

    const cv = document.getElementById('fx');
    const ctx = cv.getContext('2d');
    let confetti = [], running = false;
    function resize(){ cv.width = innerWidth; cv.height = innerHeight }
    addEventListener('resize', resize); resize();

    function burst(x, y){
      for(let i=0;i<140;i++){
        confetti.push({
          x, y,
          vx:(Math.random()*2-1)*6,
          vy:(Math.random()*2-1)*6 - 4,
          g: 0.18 + Math.random()*0.12,
          s: 3 + Math.random()*3,
          r: Math.random()*Math.PI,
          vr:(Math.random()*2-1)*0.2,
          shape: (Math.random()<0.5?'rect':'circle'),
          life: 90 + Math.random()*40
        });
      }
      if(!running){ running = true; loop(); }
    }

    function loop(){
      ctx.clearRect(0,0,cv.width,cv.height);
      confetti = confetti.filter(p=> p.life>0);
      for(const p of confetti){
        p.vy += p.g; p.x += p.vx; p.y += p.vy; p.r += p.vr; p.life--;
        ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r);
        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = `hsl(${(p.y+p.x)%360}, 90%, 60%)`;
        if(p.shape==='rect') ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s);
        else { ctx.beginPath(); ctx.arc(0,0,p.s/2,0,Math.PI*2); ctx.fill(); }
        ctx.restore();
      }
      if(confetti.length){ requestAnimationFrame(loop); }
      else { running = false; }
    }

    noBtn.addEventListener('pointerenter', () => { flee(); });
    noBtn.addEventListener('pointermove', () => { flee(); });

    function flee(){
      misses++;
      missCountEl.textContent = misses;
      if(misses >= 5){
        egg.style.display = 'block';
      }
      if(misses % 3 === 0){
        // –ø—Ä–∏–∫–æ–ª: –≤–º–µ—Å—Ç–æ –∫–Ω–æ–ø–∫–∏ "–ù–µ—Ç" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –µ—â—ë –æ–¥–Ω–∞ "–î–∞"
        noBtn.textContent = '–î–∞';
        noBtn.classList.remove('no');
        noBtn.classList.add('yes');
        noBtn.onclick = () => yesBtn.click();
      } else {
        noBtn.textContent = '–ù–µ—Ç';
        noBtn.classList.add('no');
        noBtn.onclick = null;
      }
      const wrap = document.querySelector('.card');
      const rect = wrap.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const pad = 12;
      let x = Math.random()*(rect.width - b.width - pad*2) + pad;
      let y = Math.random()*(rect.height - b.height - pad*2) + pad;
      noBtn.style.position='absolute';
      noBtn.style.left = x + 'px';
      noBtn.style.top  = y + 'px';
      nope.currentTime=0; nope.play();
    }

    yesBtn.addEventListener('click', (e)=>{
      title.textContent = '–£–í–ê–ñ–ê–Æ üëç';
      subtitle.textContent = '–ß–µ—Å—Ç–Ω–æ—Å—Ç—å ‚Äî —Å–∏–ª–∞. –î–µ—Ä–∂–∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏!';
      retryBtn.style.display = 'inline-flex';
      burst(e.clientX, e.clientY);
      yay.currentTime=0; yay.play();
    });

    retryBtn.addEventListener('click', ()=>{
      title.textContent = '–°–û–°–ê–õ?';
      subtitle.textContent = '–û—Ç–≤–µ—Ç—å —á–µ—Å—Ç–Ω–æ. –ú—ã –Ω–∏–∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ–º ü§´';
      retryBtn.style.display = 'none';
      noBtn.style.position='relative';
      noBtn.style.left = 'auto';
      noBtn.style.top  = 'auto';
      noBtn.textContent = '–ù–µ—Ç';
      noBtn.classList.add('no');
      noBtn.onclick = null;
      misses = 0;
      missCountEl.textContent = 0;
      egg.style.display = 'none';
    });

    window.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase()==='y'){ yesBtn.click(); }
      if(e.key.toLowerCase()==='n'){ flee(); }
      if(e.key==='Enter'){ yesBtn.click(); }
    });
  </script>
</body>
</html>